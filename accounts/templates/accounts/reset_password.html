{% extends "accounts/base.html" %}
{% load static %}
{% block title %}<title>Reset Password</title>{% endblock %}
{% block content %}

<main>
  <div class="d-flex justify-content-center align-items-center">
    <div class="card border-0 rounded-4 p-5" style="max-width: 500px; margin-top:150px; width: 100%;">
      <div class="text-center mb-4">
        <h3 class="fw-bold" style="color: #333;">Reset Your Password</h3>
        <p class="text-secondary">
          Please enter your new password below and confirm it to reset your account password.
        </p>
      </div>

      {% for message in messages %}
        <div class="alert alert-{% if message.tags == 'error' %}danger{% else %}{{ message.tags }}{% endif %} alert-dismissible fade show" role="alert">
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      {% endfor %}

      <form action="{% url 'accounts:reset_password_page' %}" method="POST" class="needs-validation" novalidate>
        {% csrf_token %}

        <!-- New Password -->
        <div class="form-floating mb-3">
          <input 
              name="password" 
              type="password" 
              class="form-control {% if password_error %}is-invalid{% endif %}" 
              id="newPasswordInput" 
              placeholder="New password *" 
              value="{{ request.POST.password|default:'' }}"
              required
          >
          <label for="newPasswordInput">New Password *</label>
          {% if password_error %}
            <div class="invalid-feedback d-block">{{ password_error }}</div>
          {% endif %}
        </div>

        <!-- Confirm Password -->
        <div class="form-floating mb-3">
          <input 
              name="confirm_password" 
              type="password" 
              class="form-control {% if confirm_error %}is-invalid{% endif %}" 
              id="confirmPasswordInput" 
              placeholder="Confirm password *"
              value="{{ request.POST.confirm_password|default:'' }}" 
              required
          >
          <label for="confirmPasswordInput">Confirm Password *</label>
          {% if confirm_error %}
            <div class="invalid-feedback d-block">{{ confirm_error }}</div>
          {% endif %}
        </div>

        <button class="btn btn-primary w-100 text-uppercase" type="submit">Reset Password</button>

        <div class="customer-option mt-4 text-center">
          <span class="text-secondary">Remembered your password?</span>
          <a href="{% url 'accounts:login_page' %}" class="btn-text">Back to Login</a>
        </div>
      </form>
    </div>
  </div>
</main>

<div class="mb-5 pb-xl-5"></div>

{% endblock %}
